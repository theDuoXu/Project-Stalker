# --- DATABASE CONFIG FOR TESTS ---
# Conectamos al Docker que tienes levantado
spring.datasource.url=jdbc:postgresql://localhost:5432/projectstalker_db
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# --- HIBERNATE (LA CLAVE) ---
# create-drop: Crea las tablas al arrancar el test y las BORRA al terminar.
# Esto garantiza un entorno limpio siempre.
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# --- DIALECTO ---
# Vital para que entienda JSONB y no intente crear BLOBs raros
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# --- LOGGING ---
# Para ver si Hibernate se queja al crear la tabla
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE