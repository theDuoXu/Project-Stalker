<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="projectstalker.ui.view.components.RuleConfigDialogController"
      spacing="15" prefWidth="600" prefHeight="500"
      style="-fx-background-color: -color-bg-default;">

    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>

    <HBox alignment="CENTER_LEFT" spacing="10">
        <FontIcon iconLiteral="mdi2c-cog" iconSize="24" style="-fx-icon-color: -color-accent-fg;"/>
        <Label text="Configuración de Reglas de Alerta (Z-Score)" styleClass="h3"/>
    </HBox>

    <Label text="Define cómo se calculan las anomalías para cada métrica. Los cambios se aplican inmediatamente." 
           styleClass="text-muted" wrapText="true"/>

    <TableView fx:id="rulesTable" VBox.vgrow="ALWAYS" editable="true">
        <columns>
            <TableColumn fx:id="colMetric" text="Métrica" prefWidth="150"/>
            <TableColumn fx:id="colLog" text="Log-Normal" prefWidth="100"/>
            <TableColumn fx:id="colThreshold" text="Umbral (σ)" prefWidth="120"/>

            <TableColumn fx:id="colWindow" text="Ventana (h)" prefWidth="120"/>
        </columns>
        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
        <placeholder>
            <Label text="Cargando reglas..."/>
        </placeholder>
    </TableView>

    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button text="Cerrar" onAction="#onClose" styleClass="btn-outline"/>
        <Button text="Guardar Cambios" onAction="#onSave" styleClass="btn-primary">
            <graphic><FontIcon iconLiteral="mdi2c-content-save"/></graphic>
        </Button>
    </HBox>

</VBox>
